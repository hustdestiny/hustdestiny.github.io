<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Destiny</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Destiny">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Destiny">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Destiny">
  
    <link rel="alternate" href="/atom.xml" title="Destiny" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Destiny</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-记一次MethodSwizzle的bugfix" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/16/记一次MethodSwizzle的bugfix/" class="article-date">
  <time datetime="2019-11-16T00:38:35.000Z" itemprop="datePublished">2019-11-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/16/记一次MethodSwizzle的bugfix/">记一次MethodSwizzle的bugfix</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Bug现象是，进入App列表页空白，杀进程后恢复不复现。顶部挂着一个”点击加载更多”，然后点击了也没有内容出现。</p>
<ol>
<li><p>首先确认服务端有没有正确返回。（万一服务端就是返回空列表，锅就甩出去了）<br>很明显并不是，从报bug同学的日志分析来看。接口是正常返回的。</p>
</li>
<li><p>检查逻辑是否正常。（这一步没有什么好的办法，硬着头皮读咯，自己写的）<br>一切都在主线程正常执行，看不出什么异常</p>
</li>
<li><p>尝试复现<br>几个兄弟，一起操作了半天也没有复现（更别谈稳定复现了），出问题的同学是很久不使用的用户。</p>
</li>
<li><p>模拟复现，列表空白<br>4.1 cell高度为0，虽然没有高度，但是cell内部的空间还是可以渲染在屏幕的左上角。<br>4.2 reloadData未调用。<br>4.3 DZNEmptyView未出现，间接说明数据源有值。</p>
</li>
</ol>
<ol>
<li><p>MJRefresh、DZNEmptyDataSet对reloadData有hook<br>5.1 其中DZNEmptyDataSet虽然并未明显复现，实现诡异，自己维护了一个方法的静态数组，而且lazy hook。key是”固定key+方法名”，逻辑上只有当DZNEmptyDataSet是最后一个hook才能成立。<br>5.2而MJRefresh，在load方法中hook，本不应该出现问题，强行延后现象一致。<br>5.3排查项目中的reloadData，发现可疑点某个特殊case下<br><code>[[[self.tableView rac_signalForSelector:@selector(reloadData)]</code><br>RAC也是lazy hook的方式。<br>5.4再从日志中确认，出问题的情况符合推论。</p>
</li>
<li><p>结论<br> 6.1 修复DZNEmptyDataSet的不正确的hook方式<br> 6.2 能少用hook黑魔法还是要少用，太强大，不容易控制<br> 6.3 日志很重要<br> 6.4 排查疑难问题要尝试复现，或者模拟复现</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/16/记一次MethodSwizzle的bugfix/" data-id="ck30vt4pz000wehz6wzo6eic5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-MacBook-Pro-Retina-13-inch-Early-2015-更换ssd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/27/MacBook-Pro-Retina-13-inch-Early-2015-更换ssd/" class="article-date">
  <time datetime="2019-10-27T03:47:24.000Z" itemprop="datePublished">2019-10-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/27/MacBook-Pro-Retina-13-inch-Early-2015-更换ssd/">MacBook Pro(Retina, 13-inch, Early 2015)更换ssd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先土豪就不用往下堵了，直接上最新款，嗯，真香！</p>
<p>15款的mbp，已经伴随四年了。但还是很好用的，除了128G的硬盘。（XCode本身8G，每一个模拟器就是3G，哎~）。</p>
<p>于是看了看原装512G的硬盘，嗯，新的2800，二手1400。有点肉疼。</p>
<p>再看其他的ssd。于是就看到了这款三星970EVO。（注意不是970 EVO Pro， pro需要升级固件啥的）。据说苹果原装硬盘也是三星代工，所以用这款兼容性会好些，既然网上有成功的案例，我就搬运了。而且价格公道699，也香。</p>
<p>材料</p>
<ol>
<li>512G 三星970EVO，699元（懒得等双十一了）</li>
<li>转接器，15元。送两个拆机螺丝刀。</li>
<li>8G U盘。自己原有的，用来做系统安装盘。</li>
<li>1T 移动硬盘。自己原有的，用来做备份恢复盘。</li>
</ol>
<p>过程</p>
<ol>
<li><p>备份系统。Mac提供了非常好的备份软件，就是有点慢。<br> 1.1 插上移动硬盘<br> 1.2 Mac–设置–时间机器–选择刚刚插上的硬盘，开始备份<br> 1.3 根据数据量的大小，大约1~2小时</p>
</li>
<li><p>制作U盘启动盘。请注意！！！重装系统这个操作不能从TimeMachine备份安装，也不能联网安装！！！（心疼劳资的100块）<br> 2.1 下载系统 install macOS Mojave 10.14<br> 2.2 下载制作工具 DiskMaker</p>
</li>
<li><p>装配硬盘<br> 3.1 卸下背板的10颗螺丝。<br> 3.2 断开电源。<br> 3.3 卸下硬盘。<br> 3.4 先安装装接头至主板上，再安装硬盘</p>
</li>
<li><p>格式化硬盘<br> 4.1 开机按CMD+R，在硬盘工具中，格式化 mac os 日志格式（如果不能认盘，试试双清。按10秒shift+control+option+电源清SMC，按20秒option+command+p+r清NVRAM。）<br> 4.2 开机按option，从U盘启动安装系统到三星硬盘中。<br> 4.3 设置语言等，直到出现，一、从TimeMachine恢复。二、从网络重装系统。三、新的系统。默认是第三个。此时插上硬盘选择，第一个TimeMachine，等待恢复。<br> 嗯，你可以去睡觉了。应该时间是真的长。装备文件，文件夹半个小时进度条都不动，后来缓慢动了下（劳资差点就放弃了！！）傻等三个小时后OK了。</p>
</li>
<li><p>升级完成后。进入系统，是一个10.14.4。然后慢慢升级系统。（现在好像不能跨版本升级了，只能先到10.14.5–&gt;10.14.6–&gt;10.15）</p>
</li>
<li><p>后记，使用了一周，暂时没有发现问题。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/27/MacBook-Pro-Retina-13-inch-Early-2015-更换ssd/" data-id="ck30vt4ow000aehz67b5dntkb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-iOS证书和推送" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/16/iOS证书和推送/" class="article-date">
  <time datetime="2019-10-16T12:46:34.000Z" itemprop="datePublished">2019-10-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/16/iOS证书和推送/">iOS证书和推送</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>文件列表</p>
<ol>
<li>CSR文件，本质上一对公钥私钥。</li>
<li>证书，上一步的公钥及其签名。</li>
<li>Provisioning Profile，上一步的证书，BundleID,DeviceIDs,权限等。</li>
<li>p12，对应CSR产生的私钥。</li>
</ol>
<p>目的：安装的app都是受苹果控制的</p>
<p>推送</p>
<ol>
<li>在线推送</li>
<li>本地推送</li>
<li>离线推送</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/16/iOS证书和推送/" data-id="ck30vt4pn000oehz6tsni0qth" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CocoaPods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/06/CocoaPods/" class="article-date">
  <time datetime="2019-06-06T06:28:33.000Z" itemprop="datePublished">2019-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/06/CocoaPods/">CocoaPods</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="什么是CocoaPods"><a href="#什么是CocoaPods" class="headerlink" title="什么是CocoaPods"></a>什么是CocoaPods</h1><p><a href="https://cocoapods.org/" target="_blank" rel="noopener">HomePage</a></p>
<p>CocoaPods是Swift和Objective-C工程的依赖管理工具。</p>
<h2 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure>
<h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><h2 id="库的使用者"><a href="#库的使用者" class="headerlink" title="库的使用者"></a>库的使用者</h2><p>Podfile文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">platform :ios, &apos;8.0&apos;                //平台，iOS版本</span><br><span class="line">use_frameworks!                     //swift项目没法打成.a文件</span><br><span class="line">inhibit_all_warnings!               //忽略框架的警告</span><br><span class="line"></span><br><span class="line">target &apos;MyApp&apos; do</span><br><span class="line">  pod &apos;AFNetworking&apos;, &apos;~&gt; 2.6&apos;</span><br><span class="line">  pod &apos;ORStackView&apos;, &apos;~&gt; 3.0&apos;</span><br><span class="line">  pod &apos;SwiftyJSON&apos;, &apos;~&gt; 2.3&apos;</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<p>source ‘<a href="https://github.com/CocoaPods/Specs.git&#39;" target="_blank" rel="noopener">https://github.com/CocoaPods/Specs.git&#39;</a></p>
<p>target<br>pod<br>podspec :path =&gt; ‘/Documents/PrettyKit/PrettyKit.podspec’//指定spec相对路径就会生成Development Pod方便开发<br>abstract_target//抽象target<br>abstract!// 当前target的抽象模式<br>inherit!// 当前target继承模式  </p>
<p>pod ‘SSZipArchive’, :inhibit_warnings =&gt; false// 忽略警告⚠️  </p>
<h3 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h3><p>pre_install<br>post_install  </p>
<h3 id="pod-install-or-pod-update"><a href="#pod-install-or-pod-update" class="headerlink" title="pod install or pod update"></a>pod install or pod update</h3><p>pod install //当第一个从podfile安装的时候，添加或者移除pods的时候，Podfile.lock中没有的它会添加<br>pod update  //当你想更新pod的版本的时候  </p>
<h2 id="库的开发者"><a href="#库的开发者" class="headerlink" title="库的开发者"></a>库的开发者</h2><p>主要工作是配置Spec文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec create Peanut</span><br></pre></td></tr></table></figure></p>
<p><a href="https://guides.cocoapods.org/making/specs-and-specs-repo.html" target="_blank" rel="noopener">Specs</a></p>
<h2 id="私有仓库"><a href="#私有仓库" class="headerlink" title="私有仓库"></a>私有仓库</h2><p>主要是建立一个podspecs.git仓库，主要是管理podspec文件。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/06/CocoaPods/" data-id="ck30vt4o40002ehz60bj49raf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-函数小计和数据结构" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/07/函数小计和数据结构/" class="article-date">
  <time datetime="2019-04-07T11:46:27.000Z" itemprop="datePublished">2019-04-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/07/函数小计和数据结构/">函数小计和数据结构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>绝对值函数<br>fabs、labs</p>
<p>向上取整、向下取整<br>ceil、floor</p>
<p>四舍五入<br>round</p>
<p>正则表达式<br>^ // 以什么开头<br>$</p>
<ol>
<li><p>线性结构，链表，stack，queue</p>
</li>
<li><p>树<br> 4.1 顺序查找，哨兵的应用 O(N)<br> 4.2 二分查找，O(logN)，依赖排序<br> 4.3 二叉树概念<br> 4.4 二叉树遍历，前序，中序，后序（堆栈），层序（队列）<br> 4.5 二叉搜索树，查找，插入，删除<br> 4.6 平衡二叉树，调整（rr,ll, rl, lr）旋转<br> 4.7 堆(完全二叉树，最大最小堆)，哈费曼树（权值），集合</p>
</li>
<li><p>图<br> 5.1 图的概念<br> 5.2 图的遍历，深度优先(栈)，广度优先（队列）<br> 5.3 最短路径<br> 5.4 最小生成树<br> 5.5 拓扑排序</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/07/函数小计和数据结构/" data-id="ck30vt4px000uehz6n9zgiya0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-handbook" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/07/git-handbook/" class="article-date">
  <time datetime="2019-03-07T13:03:24.000Z" itemprop="datePublished">2019-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/07/git-handbook/">git handbook</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>创建并切换分支</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;dst&gt; &lt;src&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改分支名字</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m &lt;oldname&gt; &lt;newname&gt;</span><br></pre></td></tr></table></figure>
<p> 修改当前分支</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m &lt;newname&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>合并commit</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev zhou-dev</span><br><span class="line">git commit -am<span class="string">"Add1"</span></span><br><span class="line">git commit -am<span class="string">"Add2"</span></span><br><span class="line">git commit -am<span class="string">"Add3"</span></span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">git rebase -i dev</span><br><span class="line">// 这命令允许合并 从zhou-dev 到 dev的三个commit</span><br><span class="line">// 在交互模式中 将顶部pick </span><br><span class="line">pick &lt;commitid&gt; Add1</span><br><span class="line">pick &lt;commitid&gt; Add2</span><br><span class="line">pick &lt;commitid&gt; Add3</span><br></pre></td></tr></table></figure>
<p> 改为</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick &lt;commitid&gt; Add1</span><br><span class="line">squash &lt;commitid&gt; Add2</span><br><span class="line">squash &lt;commitid&gt; Add3</span><br></pre></td></tr></table></figure>
<p> 然后</p>
 <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">wq</span></span><br></pre></td></tr></table></figure>
<p> 进入另一个页面，重新编辑commit message </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置(加上–global代表全局，不加则代表本仓库)</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config [--global] user.name <span class="string">"xxx"</span></span><br><span class="line">git config [--global] user.email <span class="string">"xxx"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>当已经track了某些文件，后加入gitignore</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached .</span><br><span class="line">git add .</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/07/git-handbook/" data-id="ck30vt4pi000lehz678hgtzie" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-闲聊" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/29/闲聊/" class="article-date">
  <time datetime="2018-12-29T09:53:35.000Z" itemprop="datePublished">2018-12-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/29/闲聊/">闲聊</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>不知不觉2018年，从身边划过。</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><p>似乎习惯了平淡的生活，其实👨‍💻‍的周一到周五是没有生活的，只有周末有。<br>租的房子阳光很好，幻想很多次周六都是被阳光照醒的，其实不是。周六醒的比平时还要早，不知是不是步入中年。<br>醒来后小花匠喜欢摆弄她的宝贝，绿萝、多肉、栀子花、🌵、还有我叫不上名字的。<br>也尝试过养一些🐟，但不知道是水温没有控制好还是增氧机不太行，小鱼儿们一条一条挂了，挺伤心。<br>最后尝试养一些不容易出问题的。两只草龟，嗯！一直不爱动，另一只经常爬上背叠罗汉~~还得等他们大一些才好玩。<br>喜欢看吃鸡主播托马斯玩游戏，生活很好听。自己也玩了几局太难了，简直小聋瞎，菜是原罪。追了TI，LGD还是差一点运气，May皇表现很好。<br>大厨的手艺越来越好了，增加了好多拿手菜，我也跟着涨了不少膘。一碗麻婆豆腐简直增加我唾液分泌。手工擀面包饺子也是极其成功的。</p>
<h2 id="投资"><a href="#投资" class="headerlink" title="投资"></a>投资</h2><p>开始买了些基金，虽然有专门的基金经理打理，但是觉得基金还是太不灵活了，也看不清楚经理的操作，不太喜欢这种失控的感觉。<br>然后开始买股票，真的是瞎买，就跟赌博一样买大买小。看到一些公众号，大多也是推荐买指数的。其实明白了一个道理，没什么是稳赚不赔的。真要能看懂公司的财报，发展的方向真的是不容易，耗时耗力。所以没有什么是天上掉下来的，就算有也不会天天掉。<br>再后来就不买了，现阶段还是工作更重要，时间本来就很宝贵，投资这件事暂且放放。</p>
<h2 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h2><p>暂无，农历年末再补充吧</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/29/闲聊/" data-id="ck30vt4q0000xehz6pwev9kq5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-iOS逆向开发学习笔记（2）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/25/iOS逆向开发学习笔记（2）/" class="article-date">
  <time datetime="2018-10-25T12:55:38.000Z" itemprop="datePublished">2018-10-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/25/iOS逆向开发学习笔记（2）/">iOS逆向开发学习笔记（2）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>简单记录一下逆向抖音的过程。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><ul>
<li>越狱手机一台，iPhone5s+10.3.3</li>
<li>iFunbox</li>
<li>Clutch</li>
<li>class-dump</li>
<li>Hopper</li>
<li>Reveal</li>
<li>Charles</li>
<li>Thoes</li>
<li>Keychain-Dumper</li>
</ul>
<h1 id="干活"><a href="#干活" class="headerlink" title="干活"></a>干活</h1><ol>
<li><p>给越狱手机安装工具<br> substrate safemode(很多deb的依赖)<br> dropbear(ssh工具)<br> preferencesload + sslkillswitch(用来抓包)<br> reveal2loader(用来看层级结构)<br> cycript(执行代码)<br> AppSync-Unified + appinst(安装砸壳后的ipa)</p>
</li>
<li><p>将Clutch，cp到手机上并赋予执行权限，找出抖音的序号，砸壳会输出砸壳后的路径</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod +x Clutch</span><br><span class="line">Clutch -i</span><br><span class="line">Clutch -d (index)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改名字后copy到电脑上<br> 使用class-dump，提取头文件<br> 使用Hopper，分析二进制，获得部分汇编实现（我推荐分析完保存一份，不然每次打开都很慢）</p>
</li>
<li><p>使用reveal分析UI</p>
<p> 首先在越狱手机安装Reveal2Loader，在Mac端安装Revealv4(8796)<br> 这好像没什么好说的，找出感兴趣的页面或者逻辑。因为能直接看到对象的地址，所以配合cycript简直无敌。</p>
</li>
<li><p>使用cycript在运行时尝试你的想法，具体cycript自行百度之</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cycript -p Aweme</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Charles进行抓包</p>
<p> 但是我发现抖音，只有刚刚安装，并且第一次打开才可以抓包。kill之后就不可以抓包了。<del>（当然删除沙盒之后也可以）很奇怪</del>。和SSLPinning相关待补充。</p>
</li>
<li><p>Keychain-Dumper</p>
<p> <a href="https://github.com/ptoomey3/Keychain-Dumper" target="_blank" rel="noopener">github地址</a></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /var/Keychains</span><br><span class="line">chmod +r keychain-2.db</span><br><span class="line">cp /User/Media/ASO/keychain_dumper /bin/keychain_dumper</span><br><span class="line">chmod +x /bin/keychain_dumper</span><br><span class="line">keychain_dumper &gt; keychain-export.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>Hopper+lldb</p>
<p> 首先做一次端口映射，这样就可以通过USB直接访问手机啦，达到的效果就是<br> 通过访问电脑的2222端口访问到手机的22端口，22是手机的ssh端口<br> 通过访问电脑的3333端口访问到手机的1234端口，1234是后面的debugserver的端口</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iproxy 2222 22</span><br><span class="line">iproxy 3333 1234</span><br></pre></td></tr></table></figure>
<p> <a href="https://www.cnblogs.com/ludashi/p/5730338.html" target="_blank" rel="noopener">调试教程</a></p>
</li>
<li><p>使用Thoes，编写插件</p>
<p> 此处省略一千字。。</p>
</li>
</ol>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>其实这些工具的使用都只是皮毛，稍微有点入门的话，应该是分析，汇编，还原函数。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/25/iOS逆向开发学习笔记（2）/" data-id="ck30vt4pr000qehz6qdg7lupc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-中秋以后" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/26/中秋以后/" class="article-date">
  <time datetime="2018-09-26T14:47:13.000Z" itemprop="datePublished">2018-09-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/26/中秋以后/">中秋以后</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这个月有点累，好多事情交错在一起。</p>
<p>工作上刚进入一个新的领域，且进展不是很顺利，就不过多的吐槽了。码农真的是一个焦虑的职业，每天就是不断的学习，感觉总有学不完的新知识。或许我还没有找到行业的门道吧，我又打算重新理一下基础，只有基础越扎实才能站的更高。</p>
<p>加油！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/26/中秋以后/" data-id="ck30vt4pw000tehz6g9ljt9j9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-iOS逆向开发学习笔记（1）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/27/iOS逆向开发学习笔记（1）/" class="article-date">
  <time datetime="2018-08-27T09:07:35.000Z" itemprop="datePublished">2018-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/27/iOS逆向开发学习笔记（1）/">iOS逆向开发学习笔记（1）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近进入到一个新的领域，iOS逆向。哇，听起来好像很高大上的样子呢。这个还是比较有门槛的，前期主要是要学习一些工具。</p>
<p>前提条件</p>
<ol>
<li>虚拟机+win7+爱思助手（越狱软件）</li>
<li>可越狱的iPhone设备</li>
<li>thoes框架（可以编写插件代码注入）</li>
<li>iFunBox (可以copy内容至指定Media文件夹)</li>
<li>Charles (网络工具)</li>
<li>Cycript/Reveal 主要用来看页面层级</li>
<li>老版本的Xcode7.1 执行 xcode-select -s app的路径</li>
<li>熟练使用linux/unix命令mv, cp, cat, grep, mkdir, rm 等, 使用vim, ssh</li>
</ol>
<p>安装<br>Cydia，越狱软件的AppStore。</p>
<ol>
<li>Filza</li>
<li>Substrate Safe Mode</li>
<li>Dropbear</li>
<li>Cycript</li>
<li>ssl-kill-switch2</li>
</ol>
<p>Thoes运行一个项目就可以跑起来了。</p>
<p>还没入门，任重道远。。fight!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/27/iOS逆向开发学习笔记（1）/" data-id="ck30vt4pt000rehz6dbxcct9a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/16/记一次MethodSwizzle的bugfix/">记一次MethodSwizzle的bugfix</a>
          </li>
        
          <li>
            <a href="/2019/10/27/MacBook-Pro-Retina-13-inch-Early-2015-更换ssd/">MacBook Pro(Retina, 13-inch, Early 2015)更换ssd</a>
          </li>
        
          <li>
            <a href="/2019/10/16/iOS证书和推送/">iOS证书和推送</a>
          </li>
        
          <li>
            <a href="/2019/06/06/CocoaPods/">CocoaPods</a>
          </li>
        
          <li>
            <a href="/2019/04/07/函数小计和数据结构/">函数小计和数据结构</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 hust_destiny<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>